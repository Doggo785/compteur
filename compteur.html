<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compte Ã  Rebours Temporel</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@300;400&display=swap');

        body {
            font-family: 'Roboto', sans-serif;
            background-color: #121212;
            color: #e0e0e0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            overflow: hidden;
            position: relative;
            transition: background-color 1s ease;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.05) 1px, transparent 1px);
            background-size: 25px 25px;
            animation: background-pan 60s linear infinite;
        }

        @keyframes background-pan {
            from {
                background-position: 0 0;
            }

            to {
                background-position: 250px 250px;
            }
        }

        .container {
            width: 100%;
            max-width: 800px;
            background: rgba(30, 30, 30, 0.9);
            border-radius: 15px;
            padding: 30px 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
            z-index: 1;
        }

        h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #c91616;
            text-shadow: 0 0 10px #c91616, 0 0 20px rgba(201, 22, 22, 0.5);
        }

        #countdown-timer {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8em;
            margin-bottom: 30px;
            color: #ffffff;
            letter-spacing: 2px;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.7);
        }

        .progress-container {
            margin-bottom: 20px;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 1.1em;
            font-weight: 400;
        }

        .progress-label .percentage {
            font-family: 'Orbitron', sans-serif;
            color: #00ffaa;
        }

        .progress-bar-bg {
            width: 100%;
            height: 25px;
            background-color: #333;
            border-radius: 25px;
            padding: 4px;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.4);
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            border-radius: 20px;
            background: linear-gradient(90deg, #00aaff, #00ffaa);
            /* === AMÃ‰LIORATION DE LA FLUIDITÃ‰ === */
            transition: width 0.1s linear;
        }

        #main-progress-bar-bg {
            height: 40px;
            padding: 5px;
            margin-top: 10px;
        }

        #main-progress-bar {
            background: linear-gradient(90deg, #ff4d4d, #ffa500, #ffff00, #00ffaa, #00aaff);
            background-size: 200% 100%;
            animation: gradient-animation 5s ease infinite;
            transition: width 0.5s ease-out;
            /* On garde une transition plus lente pour la barre principale */
        }

        @keyframes gradient-animation {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        .small-bars-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }

        .time-unit-container .progress-bar-bg {
            height: 20px;
        }

        .progress-bar-days {
            background: linear-gradient(90deg, #5ee6a8, #9bffd9);
            box-shadow: 0 0 10px #5ee6a8;
        }

        .progress-bar-hours {
            background: linear-gradient(90deg, #47a1ff, #81c7ff);
            box-shadow: 0 0 10px #47a1ff;
        }

        .progress-bar-minutes {
            background: linear-gradient(90deg, #ffb347, #ffcf81);
            box-shadow: 0 0 10px #ffb347;
        }

        .progress-bar-seconds {
            background: linear-gradient(90deg, #ff5e5e, #ff9b9b);
            box-shadow: 0 0 10px #ff5e5e;
        }

        .progress-bar-milliseconds {
            background: linear-gradient(90deg, #d85bff, #ff9bfb);
            box-shadow: 0 0 10px #d85bff;
            transition: none;
        }


        /* On enlÃ¨ve la transition pour la fluiditÃ© parfaite des ms */

        @media (max-width: 600px) {
            .small-bars-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .container {
                padding: 20px;
            }

            h1 {
                font-size: 2em;
            }

            #countdown-timer {
                font-size: 1.2em;
            }
        }

        @keyframes dropfox-fall {
            0% {
                top: 100%;
            }

            100% {
                top: -10%;
            }
        }

        @keyframes dropfox-shake {

            0%,
            100% {
                transform: translateX(0);
            }

            50% {
                transform: translateX(80px);
            }
        }

        .dropfoxy {
            z-index: 0;
            position: fixed;
            top: -10%;
            animation-name: dropfox-fall, dropfox-shake;
            animation-iteration-count: infinite, infinite;
            animation-timing-function: linear, ease-in-out;
            cursor: default;
            user-select: none;
            animation-play-state: running, running;
        }

        .animate-minute {
            animation: scale-up 0.5s ease-in-out, gold-shine 1.2s ease-in-out 0.3s;
        }

        @keyframes scale-up {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.2);
            }
        }

        @keyframes gold-shine {
            0% {
                color: #e0e0e0;
                text-shadow: none;
                background-position: 150% 0;
            }
            20%, 60% {
                color: transparent;
                background-image: linear-gradient(to right, #e0e0e0 20%, #ffd700 50%, #e0e0e0 80%);
                background-size: 200% 100%;
                background-clip: text;
                -webkit-background-clip: text;
                background-position: 50% 0;
                text-shadow: 0 0 10px #ffd700;
            }
            100% {
                color: #e0e0e0;
                text-shadow: none;
                background-position: -50% 0;
            }
        }

        /* --- Style de la roue --- */
        .wheel-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 200;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s, visibility 0.5s;
        }

        .wheel-container.visible {
            opacity: 1;
            visibility: visible;
        }

        .wheel-spinner {
            position: relative;
            width: 400px;
            height: 400px;
        }

        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            border: 8px solid #fff;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            transition: transform 5s cubic-bezier(0.25, 1, 0.5, 1);
        }

        .wheel-segment {
            position: absolute;
            width: 50%;
            height: 50%;
            background-color: var(--color);
            transform-origin: 100% 100%;
            transform: rotate(calc(45deg * var(--i)));
            clip-path: polygon(0 0, 100% 0, 100% 100%);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .wheel-segment span {
            display: block;
            transform: rotate(22.5deg);
            color: #111;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            font-size: 1.2em;
        }

        .wheel-pointer {
            position: absolute;
            top: 50%;
            right: -30px;
            width: 0;
            height: 0;
            border-top: 20px solid transparent;
            border-bottom: 20px solid transparent;
            border-left: 30px solid #c91616;
            transform: translateY(-50%);
            z-index: 10;
        }

        /* --- Style du message de rÃ©sultat --- */
        .result-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            font-family: 'Orbitron', sans-serif;
            font-size: 6em;
            font-weight: 700;
            color: #fff;
            text-shadow: 0 0 10px #000, 0 0 30px var(--glow-color, #fff);
            z-index: 201;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, transform 0.3s ease, visibility 0.3s;
            pointer-events: none;
        }

        .result-message.visible {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -50%) scale(1);
        }
    </style>
</head>

<body>

    <div id="result-message" class="result-message"></div>

    <div id="wheel-container" class="wheel-container">
        <div class="wheel-spinner">
            <div id="wheel" class="wheel">
                <!-- Les segments seront gÃ©nÃ©rÃ©s par JS -->
            </div>
            <div class="wheel-pointer"></div>
        </div>
    </div>

    <div class="container">
        <h1>ðŸ’€ DEADLINE ðŸ’€</h1>
        <div id="countdown-timer">-- jours --:--:--:--</div>

        <div class="progress-container">
            <div class="progress-label">
                <span>Progression Totale</span>
                <span class="percentage" id="main-progress-percentage">0.0000000%</span>
            </div>
            <div class="progress-bar-bg" id="main-progress-bar-bg">
                <div class="progress-bar" id="main-progress-bar"></div>
            </div>
        </div>

        <hr style="border-color: rgba(255,255,255,0.1); margin: 40px 0;">

        <div class="small-bars-grid">
            <div class="time-unit-container">
                <div class="progress-label">
                    <span>Jour</span>
                    <span class="percentage" id="hours-percentage">0%</span>
                </div>
                <div class="progress-bar-bg">
                    <div class="progress-bar progress-bar-hours" id="hours-bar"></div>
                </div>
            </div>
            <div class="time-unit-container">
                <div class="progress-label">
                    <span>Heure</span>
                    <span class="percentage" id="minutes-percentage">0%</span>
                </div>
                <div class="progress-bar-bg">
                    <div class="progress-bar progress-bar-minutes" id="minutes-bar"></div>
                </div>
            </div>
            <div class="time-unit-container">
                <div class="progress-label">
                    <span id="minute-label">Minute</span>
                    <span class="percentage" id="seconds-percentage">0%</span>
                </div>
                <div class="progress-bar-bg">
                    <div class="progress-bar progress-bar-seconds" id="seconds-bar"></div>
                </div>
            </div>
            <div class="time-unit-container">
                <div class="progress-label">
                    <span>Seconde</span>
                    <span class="percentage" id="milliseconds-percentage">0%</span>
                </div>
                <div class="progress-bar-bg">
                    <div class="progress-bar progress-bar-milliseconds" id="milliseconds-bar"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <script>
        // --- PERSONNALISATION ---
        const dateDebut = new Date('2025-10-07T10:30:00');
        const dateCible = new Date('2025-10-10T13:30:00');
        const totalMillisecondesIntervalle = dateCible - dateDebut;
        // -------------------------

        // --- Mise en cache des Ã©lÃ©ments DOM ---
        const domElements = {
            mainProgressBar: document.getElementById('main-progress-bar'),
            mainProgressPercentage: document.getElementById('main-progress-percentage'),
            hoursBar: document.getElementById('hours-bar'),
            minutesBar: document.getElementById('minutes-bar'),
            secondsBar: document.getElementById('seconds-bar'),
            millisecondsBar: document.getElementById('milliseconds-bar'),
            hoursPercentage: document.getElementById('hours-percentage'),
            minutesPercentage: document.getElementById('minutes-percentage'),
            secondsPercentage: document.getElementById('seconds-percentage'),
            millisecondsPercentage: document.getElementById('milliseconds-percentage'),
            countdownTimer: document.getElementById('countdown-timer'),
            minuteLabel: document.getElementById('minute-label'),
            wheelContainer: document.getElementById('wheel-container'),
            wheel: document.getElementById('wheel'),
            resultMessage: document.getElementById('result-message')
        };

        let lastMinute = -1;
        let lastSecond = -1;
        let hypeModeActive = false;
        let normalBackgroundColorInterval;
        let hypeBackgroundColorInterval;
        let particles = [];
        const normalParticleCount = 25;
        const hypeParticleCount = 250;

        const emojiImages = [
            "https://cdn3.emoji.gg/emojis/PepeHands.png",
            "https://cdn.frankerfacez.com/emoticon/619207/4",
            "https://cdn3.emoji.gg/emojis/3808-prayge.png",
            "https://cdn3.emoji.gg/emojis/4042_shyemote.png",
            "https://cdn.frankerfacez.com/emoticon/381875/4",
            "https://cdn.7tv.app/emote/01F6MQ33FG000FFJ97ZB8MWV52/2x.avif",
            "https://cdn.7tv.app/emote/01FS5ZCFG0000500DPPCXJWCP8/2x.avif",
            "https://cdn.7tv.app/emote/01FB4S3QMG0001AXCAFYDEG758/2x.avif",
            "https://cdn.7tv.app/emote/01F6NM2T080003C6R1CKK0T0P2/2x.avif",
            "https://cdn.7tv.app/emote/01F2ZWD6CR000DSBG200DM9SGM/2x.avif",
            "https://cdn.7tv.app/emote/01F6PWXW5R0005589X3BDJC4QC/2x.avif",
            "https://cdn.7tv.app/emote/01F6Q72JSR0001K6WGNZJBARWS/2x.avif",
            "https://cdn.7tv.app/emote/01F6M5ZD3R0002B6P5MWZDK80C/2x.avif",
            "https://cdn.7tv.app/emote/01F6NMD520000AAS5FM9QEF9ZJ/2x.avif",
            "https://cdn.7tv.app/emote/01HQXFC5G00003SVFRS0KDHZYN/2x.avif",
            "https://cdn.7tv.app/emote/01F6RD7B88000B4N55W5NS55R7/2x.avif",
            "https://cdn.7tv.app/emote/01FG1NDHJR0001XDR7G9054X2Q/2x.avif",
            "https://cdn.7tv.app/emote/01F6N2WHKG000AR0YATR3ZV5X4/2x.avif",
            "https://cdn.7tv.app/emote/01F6SDAHC000053E74RSRY2AD2/2x.avif",
            "https://cdn.7tv.app/emote/01G3XH6QC00000CYEX22PC5CS6/2x.avif",
            "https://cdn.7tv.app/emote/01F71DN0VR0001G6FGBXSMY13C/2x.avif",
            "https://cdn.7tv.app/emote/01FS13P9T0000600V9N65KHQK7/2x.avif",
            "https://cdn.7tv.app/emote/01GHXY2RCR00025VZ4E5FVRZ3G/2x.avif"
        ];

        const wheelSegments = [
            { label: 'RIEN', color: '#cccccc', hype: false },
            { label: 'RIEN', color: '#aaaaaa', hype: false },
            { label: 'RIEN', color: '#cccccc', hype: false },
            { label: 'HYPE!', color: '#ffd700', hype: true },
            { label: 'HYPE!', color: '#ffd700', hype: true },
            { label: 'HYPE!', color: '#ffd700', hype: true },
            { label: 'HYPE!', color: '#ffd700', hype: true },
            { label: 'RIEN', color: '#cccccc', hype: false }
        ];

        function generateWheel() {
            const segmentAngle = 360 / wheelSegments.length;
            wheelSegments.forEach((segment, i) => {
                const segmentEl = document.createElement('div');
                segmentEl.className = 'wheel-segment';
                segmentEl.style.setProperty('--color', segment.color);
                segmentEl.style.setProperty('--i', i);
                segmentEl.style.transform = `rotate(${segmentAngle * i}deg)`;
                
                const span = document.createElement('span');
                span.textContent = segment.label;
                span.style.transform = `rotate(${segmentAngle / 2}deg)`;

                segmentEl.appendChild(span);
                domElements.wheel.appendChild(segmentEl);
            });
        }

        function startHypeMode() {
            if (hypeModeActive) return;
            hypeModeActive = true;
            console.log("HYPE MODE ACTIVÃ‰ !");

            // AccÃ©lÃ©rer le changement de couleur de fond
            clearInterval(normalBackgroundColorInterval);
            hypeBackgroundColorInterval = setInterval(() => {
                const randomHue = Math.floor(Math.random() * 360);
                const randomColor = `hsl(${randomHue}, 70%, 50%)`; 
                document.body.style.backgroundColor = randomColor;
            }, 150);

            // Augmenter le nombre de particules
            updateParticleCount(hypeParticleCount);

            // ArrÃªter le mode HYPE aprÃ¨s 30 secondes
            setTimeout(stopHypeMode, 30000); 
        }

        function stopHypeMode() {
            if (!hypeModeActive) return;
            hypeModeActive = false;
            console.log("HYPE MODE DÃ‰SACTIVÃ‰.");

            // RÃ©tablir le changement de couleur normal
            clearInterval(hypeBackgroundColorInterval);
            startNormalBackgroundColorChange();

            // RÃ©tablir le nombre normal de particules
            updateParticleCount(normalParticleCount);
            
            // RÃ©tablir une couleur de fond sobre
            document.body.style.backgroundColor = '#121212';
        }

        function spinWheel() {
            domElements.wheelContainer.classList.add('visible');
            
            const spinOffset = 1080; // Fait plusieurs tours pour l'effet
            const randomSpin = Math.random() * 360;
            const finalRotation = spinOffset + randomSpin;
            
            domElements.wheel.style.transition = 'transform 6s cubic-bezier(0.25, 1, 0.5, 1)';
            domElements.wheel.style.transform = `rotate(${finalRotation}deg)`;

            setTimeout(() => {
                const segmentAngle = 360 / wheelSegments.length;
                const landedAngle = finalRotation % 360;
                // Correction du calcul de l'index
                const winningSegmentIndex = Math.floor((360 - landedAngle + (segmentAngle / 2)) % 360 / segmentAngle);
                const winningSegment = wheelSegments[winningSegmentIndex];

                // Afficher le gros message
                const resultMessage = domElements.resultMessage;
                resultMessage.textContent = winningSegment.label;
                resultMessage.style.setProperty('--glow-color', winningSegment.hype ? '#ffd700' : '#cccccc');
                resultMessage.classList.add('visible');

                // Cacher la roue immÃ©diatement
                domElements.wheelContainer.classList.remove('visible');

                if (winningSegment.hype) {
                    startHypeMode();
                }

                // Cacher le message et rÃ©initialiser la roue aprÃ¨s 2 secondes
                setTimeout(() => {
                    resultMessage.classList.remove('visible');
                    domElements.wheel.style.transition = 'none';
                    domElements.wheel.style.transform = 'rotate(0deg)';
                }, 2000);

            }, 6500); // Attendre la fin de l'animation + un peu
        }

        function triggerConfetti() {
            if (hypeModeActive) return; // Pas de confettis en mode HYPE

            const duration = 5 * 1000;
            const animationEnd = Date.now() + duration;
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 100 };

            function randomInRange(min, max) {
                return Math.random() * (max - min) + min;
            }

            const interval = setInterval(function() {
                const timeLeft = animationEnd - Date.now();

                if (timeLeft <= 0) {
                    return clearInterval(interval);
                }

                const particleCount = 50 * (timeLeft / duration);
                // since particles fall down, start a bit higher than random
                confetti({ ...defaults, particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } });
                confetti({ ...defaults, particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } });
            }, 250);
        }

        function updateMainProgressBar(maintenant) {
            const ecouleMillisecondes = maintenant - dateDebut;
            let pourcentageTotal = (ecouleMillisecondes / totalMillisecondesIntervalle) * 100;
            pourcentageTotal = Math.max(0, Math.min(100, pourcentageTotal));

            domElements.mainProgressBar.style.width = pourcentageTotal + '%';
            domElements.mainProgressPercentage.textContent = pourcentageTotal.toFixed(3) + '%';
        }

        function updateCountdownTimer(maintenant) {
            const currentSecond = maintenant.getSeconds();
            const currentMinute = maintenant.getMinutes();

            if (currentMinute !== lastMinute) {
                // On lance la roue Ã  chaque minute, peu importe le mode HYPE
                spinWheel();

                lastMinute = currentMinute;

                // Animer le label "Minute"
                const minuteLabel = domElements.minuteLabel;
                minuteLabel.classList.add('animate-minute');
                setTimeout(() => {
                    minuteLabel.classList.remove('animate-minute');
                }, 1200); // DurÃ©e de l'animation gold-shine
            }

            if (currentSecond !== lastSecond) {
                const tempsRestant = dateCible - maintenant;
                if (tempsRestant > 0) {
                    const jours = Math.floor(tempsRestant / (1000 * 60 * 60 * 24));
                    const heures = Math.floor((tempsRestant % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((tempsRestant % (1000 * 60 * 60)) / (1000 * 60));
                    const secondes = Math.floor((tempsRestant % (1000 * 60)) / 1000);
                    domElements.countdownTimer.textContent =
                        `${String(jours).padStart(2, '0')}j ${String(heures).padStart(2, '0')}h ${String(minutes).padStart(2, '0')}m ${String(secondes).padStart(2, '0')}s`;
                } else {
                    domElements.countdownTimer.textContent = "OBJECTIF ATTEINT !";
                }
                lastSecond = currentSecond;
            }
        }

        function updateIndividualTimeBars(maintenant) {
            const millisecondesActuelles = maintenant.getMilliseconds();
            const secondesActuelles = maintenant.getSeconds() + (millisecondesActuelles / 1000);
            const minutesActuelles = maintenant.getMinutes() + (secondesActuelles / 60);
            const heuresActuelles = maintenant.getHours() + (minutesActuelles / 60);

            const pourcentageMillisecondes = (millisecondesActuelles / 1000) * 100;
            const pourcentageSecondes = (secondesActuelles / 60) * 100;
            const pourcentageMinutes = (minutesActuelles / 60) * 100;
            const pourcentageHeures = (heuresActuelles / 24) * 100;

            domElements.millisecondsBar.style.width = pourcentageMillisecondes + '%';
            domElements.secondsBar.style.width = pourcentageSecondes + '%';
            domElements.minutesBar.style.width = pourcentageMinutes + '%';
            domElements.hoursBar.style.width = pourcentageHeures + '%';

            domElements.millisecondsPercentage.textContent = pourcentageMillisecondes.toFixed(0) + '%';
            domElements.secondsPercentage.textContent = pourcentageSecondes.toFixed(0) + '%';
            domElements.minutesPercentage.textContent = pourcentageMinutes.toFixed(2) + '%';
            domElements.hoursPercentage.textContent = pourcentageHeures.toFixed(2) + '%';
        }

        function miseAJourBarres() {
            const maintenant = new Date();
            
            updateMainProgressBar(maintenant);
            updateCountdownTimer(maintenant);
            updateIndividualTimeBars(maintenant);

            requestAnimationFrame(miseAJourBarres);
        }

        // On lance la boucle d'animation
        requestAnimationFrame(miseAJourBarres);

        // --- Gestion des particules ---
        function createParticle() {
            const particle = document.createElement('div');
            particle.className = 'dropfoxy';
            const img = document.createElement('img');
            img.alt = 'particle';
            img.width = 64;
            img.height = 64;
            particle.appendChild(img);
            document.body.appendChild(particle);
            return particle;
        }

        function randomizeParticle(particle) {
            // Choisir une image alÃ©atoire
            const randomEmojiSrc = emojiImages[Math.floor(Math.random() * emojiImages.length)];
            const img = particle.querySelector('img');
            if (img) {
                img.src = randomEmojiSrc;
            }

            const randomLeft = Math.random() * 100;
            const randomFallDelay = Math.random() * 10;
            const randomShakeDelay = Math.random() * 3;
            const randomFallDuration = 8 + Math.random() * 5;
            const randomShakeDuration = 2 + Math.random() * 2;

            particle.style.left = randomLeft + 'vw';
            particle.style.animationDelay = `${randomFallDelay}s, ${randomShakeDelay}s`;
            particle.style.animationDuration = `${randomFallDuration}s, ${randomShakeDuration}s`;

            // Forcer le redÃ©marrage propre de l'animation pour Ã©viter les "sauts"
            particle.style.animationName = 'none';
            void particle.offsetWidth; // Force le navigateur Ã  recalculer les styles
            particle.style.animationName = '';
        }

        function updateParticleCount(targetCount) {
            const currentCount = particles.length;
            if (currentCount < targetCount) {
                // Ajouter des particules
                for (let i = 0; i < targetCount - currentCount; i++) {
                    const particle = createParticle();
                    randomizeParticle(particle);
                    particle.addEventListener('animationiteration', function(e) {
                        if (e.animationName === 'dropfox-fall') {
                            randomizeParticle(particle);
                        }
                    });
                    particles.push(particle);
                }
            } else if (currentCount > targetCount) {
                // Supprimer des particules
                const particlesToRemove = particles.splice(targetCount);
                particlesToRemove.forEach(p => p.remove());
            }
        }


        // --- Randomisation des particules ---
        document.addEventListener('DOMContentLoaded', function() {
            generateWheel(); // GÃ©nÃ©rer la roue au chargement
            updateParticleCount(normalParticleCount); // CrÃ©er les particules initiales
        });

        // --- Changement de couleur de fond alÃ©atoire ---
        function startNormalBackgroundColorChange() {
            normalBackgroundColorInterval = setInterval(() => {
                if (hypeModeActive) return;
                const randomHue = Math.floor(Math.random() * 360);
                // On reste dans des couleurs sombres (saturation basse, luminositÃ© basse) pour que le texte reste lisible
                const randomColor = `hsl(${randomHue}, 20%, 10%)`; 
                document.body.style.backgroundColor = randomColor;
            }, 6000); // Change toutes les 6 secondes
        }

        startNormalBackgroundColorChange(); // DÃ©marrer le cycle normal
    </script>

</body>

</html>